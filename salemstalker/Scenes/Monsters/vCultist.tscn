[gd_scene load_steps=38 format=3 uid="uid://ds8375k7kpihg"]

[ext_resource type="PackedScene" uid="uid://u7yct1quu07a" path="res://Scenes/Monsters/Monster_3D.tscn" id="1_20aj2"]
[ext_resource type="Script" uid="uid://bm70c84xyxpwf" path="res://Scripts/VCultist.cs" id="2_im0l4"]
[ext_resource type="Shader" uid="uid://d340c7agjccff" path="res://Shaders/magic.gdshader" id="3_cno0p"]
[ext_resource type="PackedScene" uid="uid://c4ionl12wydjs" path="res://Assets/3D/charatermodel/cultist.blend" id="4_cno0p"]
[ext_resource type="Material" uid="uid://bpu6edb0a8drx" path="res://Assets/HitFX/hitMat.tres" id="5_im0l4"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_00oym"]
animation = &"attack"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_im0l4"]
animation = &"chargeup"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_cno0p"]
animation = &"dash"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ci7oq"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ht62m"]
animation = &"walking"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ng0vc"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_c1rs2"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "velocity.length() > 0.2"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ci7oq"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "velocity.length() <= 0.2"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kviwv"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "_attackAnim == true"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ja8if"]
advance_mode = 2
advance_expression = "_canAttack == true"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xtwe5"]
xfade_time = 0.2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_im0l4"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "_attackAnim == true"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_yr5wf"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "_dashAnim == true"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ok713"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "_dashVelocity > 0.99 && _dashAnim == false"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_kviwv"]
states/End/position = Vector2(882.5, 85.9062)
states/Start/position = Vector2(253.5, 85.75)
states/attack/node = SubResource("AnimationNodeAnimation_00oym")
states/attack/position = Vector2(685.375, 182)
states/charge/node = SubResource("AnimationNodeAnimation_im0l4")
states/charge/position = Vector2(468.5, 228.125)
states/dash/node = SubResource("AnimationNodeAnimation_cno0p")
states/dash/position = Vector2(552.5, -34.5)
states/idle/node = SubResource("AnimationNodeAnimation_ci7oq")
states/idle/position = Vector2(467, 86.0625)
states/walking/node = SubResource("AnimationNodeAnimation_ht62m")
states/walking/position = Vector2(687.062, 85.8281)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_ng0vc"), "idle", "walking", SubResource("AnimationNodeStateMachineTransition_c1rs2"), "walking", "idle", SubResource("AnimationNodeStateMachineTransition_ci7oq"), "idle", "charge", SubResource("AnimationNodeStateMachineTransition_kviwv"), "charge", "attack", SubResource("AnimationNodeStateMachineTransition_ja8if"), "attack", "idle", SubResource("AnimationNodeStateMachineTransition_xtwe5"), "walking", "charge", SubResource("AnimationNodeStateMachineTransition_im0l4"), "idle", "dash", SubResource("AnimationNodeStateMachineTransition_yr5wf"), "dash", "idle", SubResource("AnimationNodeStateMachineTransition_ok713")]
graph_offset = Vector2(168, -38)

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_xdlj8"]
seamless = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_im0l4"]
render_priority = 0
shader = ExtResource("3_cno0p")
shader_parameter/Color = Color(0.313726, 0.188235, 0.921569, 1)
shader_parameter/glow_color = Color(0.258824, 0.0235294, 0.25098, 1)
shader_parameter/dist = 2.0
shader_parameter/speed = 1.0
shader_parameter/glow_intensity = -0.1
shader_parameter/glow_amount = 10.0
shader_parameter/posMult = 0.01
shader_parameter/noise = SubResource("NoiseTexture2D_xdlj8")

[sub_resource type="SphereMesh" id="SphereMesh_kviwv"]

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_cno0p"]
seamless = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_yr5wf"]
render_priority = 0
shader = ExtResource("3_cno0p")
shader_parameter/Color = Color(0.313726, 0.188235, 0.921569, 1)
shader_parameter/glow_color = Color(0.258824, 0.0235294, 0.25098, 1)
shader_parameter/dist = 2.0
shader_parameter/speed = 1.0
shader_parameter/glow_intensity = -0.1
shader_parameter/glow_amount = 10.0
shader_parameter/posMult = 1.58
shader_parameter/noise = SubResource("NoiseTexture2D_cno0p")

[sub_resource type="Curve" id="Curve_cno0p"]
_limits = [-2.0, 2.0, 0.0, 1.0]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_im0l4"]
curve = SubResource("Curve_cno0p")

[sub_resource type="Curve" id="Curve_ja8if"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_kviwv"]
curve = SubResource("Curve_ja8if")

[sub_resource type="Curve" id="Curve_xtwe5"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.504237, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_yr5wf"]
curve = SubResource("Curve_xtwe5")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_ok713"]
lifetime_randomness = 1.0
angle_min = 1.07288e-05
angle_max = 360.0
direction = Vector3(0, 0, 0)
spread = 0.0
orbit_velocity_min = -0.5
orbit_velocity_max = 0.5
orbit_velocity_curve = SubResource("CurveTexture_im0l4")
radial_velocity_min = 1.49998
radial_velocity_max = 1.49998
radial_velocity_curve = SubResource("CurveTexture_kviwv")
gravity = Vector3(0, 0, 0)
scale_min = 0.1
scale_max = 0.1
scale_curve = SubResource("CurveTexture_yr5wf")

[sub_resource type="SphereMesh" id="SphereMesh_v2reo"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_cno0p"]
albedo_color = Color(0.178212, 0.178212, 0.178212, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_cno0p"]
render_priority = 0
shader = ExtResource("3_cno0p")
shader_parameter/Color = Color(0.313726, 0.188235, 0.921569, 1)
shader_parameter/glow_color = Color(0.258824, 0.0235294, 0.25098, 1)
shader_parameter/dist = 2.0
shader_parameter/speed = 1.0
shader_parameter/glow_intensity = -0.1
shader_parameter/glow_amount = 10.0
shader_parameter/posMult = -0.06
shader_parameter/noise = SubResource("NoiseTexture2D_xdlj8")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_cno0p"]
lifetime_randomness = 1.0
emission_shape = 1
emission_sphere_radius = 0.2
angle_min = 1.07288e-05
angle_max = 360.0
direction = Vector3(0, 0, 0)
spread = 0.0
orbit_velocity_curve = SubResource("CurveTexture_im0l4")
radial_velocity_min = 0.0999776
radial_velocity_max = 0.499978
radial_velocity_curve = SubResource("CurveTexture_kviwv")
gravity = Vector3(0, 0, 0)
scale_min = 0.05
scale_max = 0.08
scale_curve = SubResource("CurveTexture_yr5wf")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_im0l4"]
albedo_color = Color(0.243687, 4.00328e-05, 0.243685, 1)
normal_enabled = true

[node name="vCultist" instance=ExtResource("1_20aj2")]
script = ExtResource("2_im0l4")

[node name="AnimationTree" type="AnimationTree" parent="." index="4"]
root_node = NodePath("../Body")
tree_root = SubResource("AnimationNodeStateMachine_kviwv")
advance_expression_base_node = NodePath("..")
anim_player = NodePath("../Body/AnimationPlayer")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="." index="5"]
transform = Transform3D(0.17005, -1.51161e-10, 4.44819e-08, 2.05466e-09, 0.0408995, -0.000492864, -1.47936e-07, 0.000394292, 0.0511243, -0.000732893, 0.462375, -0.37608)
material_override = SubResource("ShaderMaterial_im0l4")
mesh = SubResource("SphereMesh_kviwv")

[node name="OmniLight3D" type="OmniLight3D" parent="MeshInstance3D2" index="0"]
light_color = Color(0.313726, 0.188235, 0.921569, 1)
light_energy = 5.0
omni_range = 2.0

[node name="Magic" type="GPUParticles3D" parent="." index="6"]
transform = Transform3D(1, 3.72529e-07, -3.27826e-07, -2.98023e-08, 0.99998, -0.00645068, -1.19209e-07, 0.00645069, 0.99998, -0.00398066, 0.449296, -0.35853)
visible = false
material_override = SubResource("ShaderMaterial_yr5wf")
amount = 100
lifetime = 0.5
process_material = SubResource("ParticleProcessMaterial_ok713")
draw_pass_1 = SubResource("SphereMesh_v2reo")

[node name="Spawn" type="Node3D" parent="." index="7"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00286001, 0.464739, -0.386737)

[node name="Body" parent="." index="8" instance=ExtResource("4_cno0p")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, -1, 0)

[node name="Skeleton3D" parent="Body/metarig" index="0"]
bones/0/position = Vector3(-2.00883e-10, 0.930016, -0.0649478)
bones/1/rotation = Quaternion(-0.0509647, -4.09043e-11, -1.31071e-08, 0.998701)
bones/2/rotation = Quaternion(-0.0991209, -1.18622e-07, -1.18161e-08, 0.995075)
bones/5/rotation = Quaternion(-0.0938334, 1.18933e-07, -9.50142e-09, 0.995588)
bones/9/position = Vector3(0.02321, 0.179695, -0.0258477)
bones/9/rotation = Quaternion(-0.156827, 0.452254, -0.63664, 0.604617)
bones/10/rotation = Quaternion(0.712835, -1.32509e-05, -0.151422, 0.68479)
bones/11/rotation = Quaternion(0.0189465, -0.441512, 0.0317851, 0.896492)
bones/15/rotation = Quaternion(0.30379, -0.328655, -0.262531, 0.854854)
bones/16/rotation = Quaternion(-0.207841, 0.0687457, 0.129042, 0.967173)
bones/17/rotation = Quaternion(0.0250806, 0.0125801, 0.117811, 0.99264)
bones/20/position = Vector3(-0.0122632, 0.180324, -0.00908038)
bones/20/rotation = Quaternion(-0.17153, -0.653043, 0.512541, 0.530484)
bones/21/rotation = Quaternion(0.618383, -0.0551152, 0.337287, 0.707674)
bones/22/rotation = Quaternion(0.0804695, -0.0242495, -0.211768, 0.9737)
bones/23/rotation = Quaternion(-0.161795, 0.607627, 0.0469097, 0.776151)
bones/26/rotation = Quaternion(0.522486, 0.595971, 0.00513368, 0.609754)
bones/27/rotation = Quaternion(-0.305542, -0.0408437, -0.148455, 0.939647)
bones/30/rotation = Quaternion(-5.42024e-08, 0.696112, 0.717933, -5.2555e-08)
bones/34/rotation = Quaternion(0.964988, 0.0602253, -0.117898, 0.226433)
bones/35/rotation = Quaternion(0.174502, 0.00424948, 0.0223364, 0.984394)
bones/36/rotation = Quaternion(-0.473183, -0.0617349, -0.0126969, 0.878706)
bones/37/rotation = Quaternion(0.0106844, 0.961413, -0.270421, 0.0494412)
bones/39/rotation = Quaternion(0.968219, -0.0593004, 0.0786191, 0.229901)
bones/40/rotation = Quaternion(0.18438, -0.0042239, -0.0400677, 0.982029)
bones/41/rotation = Quaternion(-0.490002, 0.0553189, 0.00734169, 0.869933)
bones/42/rotation = Quaternion(-0.0613856, 0.959714, -0.268659, -0.054804)
bones/43/rotation = Quaternion(-0.632082, 0.72477, -0.180023, -0.206816)
bones/44/position = Vector3(0.181001, 0.0824029, -0.0156682)
bones/45/rotation = Quaternion(0.999891, -0.000406379, 0.0102964, -0.0106287)
bones/46/position = Vector3(-0.159219, 0.0824029, -0.0156682)
bones/47/rotation = Quaternion(0.999891, 0.000406379, -0.0102964, -0.0106287)

[node name="Plane" parent="Body/metarig/Skeleton3D" index="0"]
transform = Transform3D(1, -1.49782e-09, 2.0734e-10, 1.50912e-09, 0.997213, -0.0746057, -9.50791e-11, 0.0746057, 0.997213, 6.18818e-10, 1.74725, 0.00132345)

[node name="Plane" parent="Body/metarig/Skeleton3D/Plane" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_cno0p")

[node name="arur_l" parent="Body/metarig/Skeleton3D" index="1"]
transform = Transform3D(1.03642, -0.0345012, -0.230363, 0.159517, 0.870681, 0.587276, 0.169741, -0.607576, 0.854671, 0.279828, 1.43692, 0.273979)

[node name="arur_l" parent="Body/metarig/Skeleton3D/arur_l" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.022436, 0.0297889, 6.98492e-10)
material_override = SubResource("ShaderMaterial_cno0p")

[node name="Magic" type="GPUParticles3D" parent="Body/metarig/Skeleton3D/arur_l/arur_l" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)
material_override = SubResource("ShaderMaterial_yr5wf")
amount = 100
lifetime = 0.5
process_material = SubResource("ParticleProcessMaterial_cno0p")
draw_pass_1 = SubResource("SphereMesh_v2reo")

[node name="arua_r" parent="Body/metarig/Skeleton3D" index="2"]
transform = Transform3D(0.998688, 0.00135341, 0.362001, 0.0173899, 1.06086, -0.0519425, -0.361586, 0.0547594, 0.997337, -0.237397, 1.28806, 0.173065)

[node name="arua_r" parent="Body/metarig/Skeleton3D/arua_r" index="0"]
material_override = SubResource("ShaderMaterial_cno0p")

[node name="Magic" type="GPUParticles3D" parent="Body/metarig/Skeleton3D/arua_r/arua_r" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0)
material_override = SubResource("ShaderMaterial_yr5wf")
amount = 100
lifetime = 0.5
process_material = SubResource("ParticleProcessMaterial_cno0p")
draw_pass_1 = SubResource("SphereMesh_v2reo")

[node name="Cube" parent="Body/metarig/Skeleton3D" index="3"]
surface_material_override/0 = SubResource("StandardMaterial3D_im0l4")
surface_material_override/1 = SubResource("StandardMaterial3D_im0l4")
surface_material_override/2 = SubResource("StandardMaterial3D_im0l4")

[node name="Cube_002" parent="Body/metarig/Skeleton3D" index="4"]
surface_material_override/0 = SubResource("StandardMaterial3D_im0l4")

[node name="HitFX" parent="." index="9" instance=ExtResource("4_cno0p")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, -1, 0)
visible = false

[node name="Skeleton3D" parent="HitFX/metarig" index="0"]
bones/0/position = Vector3(-3.55271e-15, 0.942675, -0.0649478)
bones/1/rotation = Quaternion(-0.042766, 2.20339e-14, -1.01962e-08, 0.999085)
bones/2/rotation = Quaternion(-0.0991209, -1.18622e-07, -1.18161e-08, 0.995075)
bones/5/rotation = Quaternion(-0.120344, 1.18343e-07, -1.43461e-08, 0.992732)
bones/9/position = Vector3(0.02321, 0.179695, -0.0258477)
bones/9/rotation = Quaternion(-0.152866, 0.433732, -0.644764, 0.610564)
bones/10/rotation = Quaternion(0.735629, -0.0129006, -0.11315, 0.667743)
bones/11/rotation = Quaternion(0.0189465, -0.441512, 0.0317851, 0.896492)
bones/15/rotation = Quaternion(0.30379, -0.328655, -0.262531, 0.854854)
bones/16/rotation = Quaternion(-0.207841, 0.0687457, 0.129042, 0.967173)
bones/17/rotation = Quaternion(0.0250806, 0.0125801, 0.117811, 0.99264)
bones/20/position = Vector3(-0.0122632, 0.180324, -0.00908038)
bones/20/rotation = Quaternion(-0.17153, -0.653043, 0.512541, 0.530484)
bones/21/rotation = Quaternion(0.641504, -0.026759, 0.307627, 0.702226)
bones/22/rotation = Quaternion(0.0804695, -0.0242495, -0.211768, 0.9737)
bones/23/rotation = Quaternion(-0.161795, 0.607627, 0.0469097, 0.776151)
bones/26/rotation = Quaternion(0.522486, 0.595971, 0.00513368, 0.609754)
bones/27/rotation = Quaternion(-0.305542, -0.0408437, -0.148455, 0.939647)
bones/30/rotation = Quaternion(-5.42024e-08, 0.696112, 0.717933, -5.2555e-08)
bones/34/rotation = Quaternion(0.98113, 0.04019, -0.117736, 0.148013)
bones/35/rotation = Quaternion(0.0349604, 0.00431412, 0.00447496, 0.999369)
bones/36/rotation = Quaternion(-0.473183, -0.0617349, -0.0126969, 0.878706)
bones/37/rotation = Quaternion(0.0106844, 0.961413, -0.270421, 0.0494412)
bones/39/rotation = Quaternion(0.98187, -0.0404932, 0.0772635, 0.168289)
bones/40/rotation = Quaternion(0.0750645, -0.00428845, -0.0163123, 0.997036)
bones/41/rotation = Quaternion(-0.490002, 0.0553189, 0.00734169, 0.869933)
bones/42/rotation = Quaternion(-0.0613856, 0.959714, -0.268659, -0.054804)
bones/43/rotation = Quaternion(-0.632082, 0.72477, -0.180023, -0.206816)
bones/44/position = Vector3(0.181001, 0.0824029, -0.0156682)
bones/45/rotation = Quaternion(0.999891, -0.000406379, 0.0102964, -0.0106287)
bones/46/position = Vector3(-0.159219, 0.0824029, -0.0156682)
bones/47/rotation = Quaternion(0.999891, 0.000406379, -0.0102964, -0.0106287)

[node name="Plane" parent="HitFX/metarig/Skeleton3D" index="0"]
transform = Transform3D(1, 1.90727e-14, -4.96392e-14, -1.24044e-14, 0.999287, -0.0377519, -3.63339e-14, 0.037752, 0.999287, -1.39517e-14, 1.76004, 0.00514819)

[node name="Plane" parent="HitFX/metarig/Skeleton3D/Plane" index="0"]
transform = Transform3D(1, -1.27055e-21, 7.10543e-15, 0, 1, 0, 0, 0, 1, -0.00223202, 0, 0.000280977)
material_override = ExtResource("5_im0l4")

[node name="arur_l" parent="HitFX/metarig/Skeleton3D" index="1"]
transform = Transform3D(1.04322, -0.0767534, -0.184989, 0.178482, 0.801422, 0.67401, 0.0908634, -0.693004, 0.799945, 0.289199, 1.47066, 0.275832)

[node name="arur_l" parent="HitFX/metarig/Skeleton3D/arur_l" index="0"]
transparency = 1.0

[node name="arua_r" parent="HitFX/metarig/Skeleton3D" index="2"]
transform = Transform3D(1.02041, -8.9407e-08, 0.295271, -5.96046e-08, 1.06227, -2.08616e-07, -0.295272, 3.72529e-08, 1.02041, -0.250534, 1.31081, 0.18332)

[node name="arua_r" parent="HitFX/metarig/Skeleton3D/arua_r" index="0"]
transparency = 1.0

[node name="Cube" parent="HitFX/metarig/Skeleton3D" index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00223202, 0, 0.000280976)
material_override = ExtResource("5_im0l4")

[node name="Cube_002" parent="HitFX/metarig/Skeleton3D" index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00223202, 0, 0.000280976)
material_override = ExtResource("5_im0l4")

[node name="Cube_003" parent="HitFX/metarig/Skeleton3D" index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00223202, 0, 0.000280976)
material_override = ExtResource("5_im0l4")

[editable path="Body"]
[editable path="HitFX"]
